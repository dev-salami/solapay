// prisma/schema.prisma
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model Business {
  id           String @id @default(auto()) @map("_id") @db.ObjectId
  businessLogo String?
  businessName String
  email        String @unique
  phone        String
  address      String
  businessType String
  accountNumber String
  bankId       String
  accountName  String
  password     String
  isActive     Boolean @default(true)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  
  transactions Transaction[]
  
  @@map("businesses")
}

model Transaction {
  id                      String @id @default(auto()) @map("_id") @db.ObjectId
  trackingId             String @unique
  businessName           String
  email                  String
  amount_naira           Float
  amount_usd             Float
  status                 TransactionStatus @default(PENDING)
  recipientAccountNumber String
  recipientBankCode      String
  senderWalletAddress    String
  createdAt              DateTime @default(now())
  updatedAt              DateTime @updatedAt
  
  business   Business @relation(fields: [businessId], references: [id])
  businessId String   @db.ObjectId
  
  @@map("transactions")
}

enum TransactionStatus {
  PENDING
  COMPLETED
  FAILED
  FINALIZED
  RESOLVED
}